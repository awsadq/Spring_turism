<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TravelGuide</title>
  <link rel="stylesheet" th:href="@{https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css}"/>
  <link rel="stylesheet" th:href="@{/css/styles.css}"/>
  <link rel="stylesheet" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css}">
</head>
<body>

<header>
  <div class="logo">
    <h1>TravelGuide</h1>
  </div>
  <nav>
    <ul>
      <li><a href="/">Главная</a></li>
      <li><a href="/about">О нас</a></li>
      <li><a href="tours">Горящие туры</a></li>
      <li><a href="/countries">Страны</a></li>
      <li><a href="/tickets">Авиабилеты</a></li>
      <li><a href="/contact">Контакты</a></li>
      <li th:if="${#authentication.name != 'anonymousUser'}">
        <a href="/profile">Личный кабинет</a>
      </li>
    </ul>
  </nav>

</header>

<main>
  <section class="main-content">
    <div class="text-content">
      <h1>Discover the Best <span>Destinations</span></h1>
      <p>Explore the world's most beautiful places. Whether you love mountains, oceans, or cities, we have the
        perfect destination for you. Start your journey now!</p>
      <div class="auth-buttons" th:unless="${#authentication.name != 'anonymousUser'}">
        <a href="/login" class="btn auth-btn">Войти</a>
        <a href="/register" class="btn auth-btn">Регистрация</a>
      </div>

      <form th:unless="${#authentication.name == 'anonymousUser'}" action="/" method="post"
            style="margin-bottom: 20px;">
        <input type="text" name="country" placeholder="Поиск по местам..."
               style="padding: 10px; width: 200px; border-radius: 5px;" th:value="${searchQuery}">
        <button type="submit"
                style="padding: 10px 20px; border-radius: 5px; background-color: #f5ba13; color: #1a1a1a;">Найти
        </button>
      </form>
    </div>


    <div class="interactive-world">
      <div class="background-elements">
        <div class="ring"></div>
        <div class="stars"></div>
        <div class="orbiting-rings"></div> <!-- Вращающиеся кольца -->
      </div>
      <img src="/images/world.png" alt="World Map" class="world-map">

      <!-- Контейнер с флагами -->
      <div class="flag-orbit">
        <div class="flag flag-1" title="USA"></div>
        <div class="flag flag-2" title="France"></div>
        <div class="flag flag-3" title="Japan"></div>
        <div class="flag flag-4" title="India"></div>
        <div class="flag flag-5" title="Brazil"></div>
      </div>
    </div>

    <div class="meteor-rain">
      <div class="meteor"></div>
      <div class="meteor"></div>
      <div class="meteor"></div>
      <div class="meteor"></div> <!-- Метеоритный дождь -->
    </div>

  </section>
</main>

<div class="main-container">
  <!-- Боковая панель фильтрации -->
  <aside class="sidebar">
    <h2>Фильтры</h2>
    <form th:action="@{/tours/search}" method="get" class="filter-form">
      <!-- Поле для страны -->
      <label for="country">Страна:</label>
      <input type="text" id="country" name="country" th:value="${tour.touristPlace.country}" /><br />

      <!-- Поле для типа тура -->
      <label for="type">Тип тура:</label>
      <select id="type" name="type">
        <option value="">Любой</option>
        <option value="ОТДЫХ" th:selected="${filter.type == 'ОТДЫХ'}">Отдых</option>
        <option value="ЭКСКУРСИЯ" th:selected="${filter.type == 'ЭКСКУРСИЯ'}">Экскурсия</option>
        <option value="ШОПИНГ" th:selected="${filter.type == 'ШОПИНГ'}">Шопинг</option>
        <option value="ГАСТРОНОМИЧЕСКИЙ_ТУР" th:selected="${filter.type == 'ГАСТРОНОМИЧЕСКИЙ_ТУР'}">Гастрономический тур</option>
      </select><br />

      <!-- Слайдер для длительности -->
      <label>Длительность (дни):</label>
      <div id="duration-slider" class="slider-container"></div>
      <input type="hidden" id="durationMin" name="durationMin" th:value="${filter.durationMin}" />
      <input type="hidden" id="durationMax" name="durationMax" th:value="${filter.durationMax}" />
      <div class="slider-values">
        <span id="durationMinValue">0</span> — <span id="durationMaxValue">60</span>
      </div>

      <!-- Слайдер для цены -->
      <label>Цена ($):</label>
      <div id="price-slider" class="slider-container"></div>
      <input type="hidden" id="priceMin" name="priceMin" th:value="${filter.priceMin}" />
      <input type="hidden" id="priceMax" name="priceMax" th:value="${filter.priceMax}" />
      <div class="slider-values">
        <span id="priceMinValue">0</span> — <span id="priceMaxValue">5000</span>
      </div>

      <!-- Горящий тур -->
      <label for="is_hot">Горящий тур:</label>
      <select id="is_hot" name="is_hot">
        <option value="" th:selected="${filter.isHot == null}">Любой</option>
        <option value="true" th:selected="${filter.isHot == true}">Да</option>
        <option value="false" th:selected="${filter.isHot == false}">Нет</option>
      </select><br />

      <button type="submit" class="btn">Применить фильтры</button>
    </form>
  </aside>

  <div th:if="${#lists.isEmpty(tours)}">
    <p>Туры не найдены.</p>
  </div>

  <!-- Список туров -->
  <section class="tours" th:if="${!#lists.isEmpty(tours)}">
    <h1>Доступные туры</h1>
    <div class="tour-cards">
      <div class="tour-card" th:each="tour : ${tours}">
        <div class="tour-card-content">
          <h3 th:if="${tour.touristPlace != null}" th:text="${tour.touristPlace.country}">Страна</h3>
          <h3 th:unless="${tour.touristPlace != null}">Страна не указана</h3>

          <p th:if="${tour.touristPlace != null}"><strong>Место:</strong> <span th:text="${tour.touristPlace.placeName}">Место</span></p>
          <p th:unless="${tour.touristPlace != null}"><strong>Место:</strong> Не указано</p>

          <p><strong>Тип:</strong> <span th:text="${tour.type}">Тип</span></p>
          <p><strong>Длительность:</strong> <span th:text="${tour.duration}">0</span> дней</p>
          <p><strong>Цена:</strong> $<span th:text="${tour.price}">0.00</span></p>
          <p><strong>Описание:</strong> <span th:text="${tour.description}">Описание</span></p>
          <p><strong>Горящий:</strong> <span th:text="${tour.isHot ? 'Да' : 'Нет'}">Нет</span></p>
        </div>
      </div>
    </div>

  </section>
</div>


<footer>
  <div class="footer-container">
    <div class="footer-section about">
      <h3>TravelGuide</h3>
      <p>TravelGuide помогает вам находить и бронировать лучшие предложения для путешествий. Откройте для себя мир
        вместе с нами!</p>
      <p>&copy; 2024 TravelGuide | Все права защищены</p>
    </div>

    <div class="footer-section links">
      <h4>Ссылки</h4>
      <ul>
        <li><a href="/">Главная</a></li>
        <li><a href="/about">О нас</a></li>
        <li><a href="#">Горящие туры</a></li>
        <li><a href="/countries">Страны</a></li>
        <li><a href="/tickets">Авиабилеты</a></li>
        <li><a href="/contact">Контакты</a></li>
        <li th:if="${#authentication.name != 'anonymousUser'}">
          <a href="/profile">Личный кабинет</a>
        </li>
      </ul>
    </div>

    <div class="footer-section contact">
      <h4>Контакты</h4>
      <p>Телефон: +996 504 09 99 00</p>
      <p>Email: travelguide@gmail.com</p>
      <p>Адрес: Бишкек, ул. Уметалиева, 120</p>
    </div>

    <div class="footer-section social">
      <h4>Мы в соцсетях</h4>
      <div class="social-icons">
        <a href="#" class="facebook"><i class="fab fa-facebook-f"></i></a>
        <a href="#" class="instagram"><i class="fab fa-instagram"></i></a>
        <a href="#" class="twitter"><i class="fab fa-twitter"></i></a>
        <a href="#" class="youtube"><i class="fab fa-youtube"></i></a>
      </div>
    </div>
  </div>
  <hr class="footer-line">
  <div class="footer-rights">
    <p>&copy; Все права защищены. Информация сайта защищена законом об авторских правах.</p>
  </div>
</footer>


<script>
  const flagImage = document.getElementById('flagImage');
  const flags = ['/images/italy_png.png', '/images/egypt_png.png', '/images/spain_png.png']; // Пути к изображениям флагов
  let currentFlag = 0;

  function changeFlag() {
    currentFlag = (currentFlag + 1) % flags.length;
    flagImage.src = flags[currentFlag];
  }

  setInterval(changeFlag, 5000); // Смена флага каждые 5 секунд

</script>

<script src="/js/scripts.js"></script>
<script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>


<script>

  // Получаем элементы
  const chatBox = document.getElementById('chat-box');
  const chatOpenBtn = document.getElementById('chat-open-btn');
  const chatCloseBtn = document.getElementById('chat-close-btn');
  const chatForm = document.getElementById('chat-form');
  const chatInput = document.getElementById('chat-input');
  const chatMessages = document.getElementById('chat-messages');

  // Открытие/закрытие чата при нажатии на иконку
  chatOpenBtn.addEventListener('click', () => {
    if (chatBox.style.display === 'none' || chatBox.style.display === '') {
      chatBox.style.display = 'flex'; // Показываем чат
    } else {
      chatBox.style.display = 'none'; // Скрываем чат
    }
  });

  // Закрытие чата при нажатии на крестик
  chatCloseBtn.addEventListener('click', () => {
    chatBox.style.display = 'none'; // Скрываем чат
  });

  // Отправка сообщения и ответ менеджера
  chatForm.addEventListener('submit', (e) => {
    e.preventDefault(); // Предотвращаем отправку формы
    const message = chatInput.value;

    if (message) {
      // Добавляем сообщение от пользователя
      const messageDiv = document.createElement('div');
      messageDiv.classList.add('user-message'); // Класс для сообщений пользователя
      messageDiv.textContent = message;
      chatMessages.appendChild(messageDiv);

      // Логика ответа менеджера
      let managerMessage = '';

      // Ответы менеджера в зависимости от сообщения пользователя
      if (message.toLowerCase() === 'мне нужна помощь') {
        managerMessage = 'Чем могу вам помочь?';
      } else if (message.toLowerCase() === 'я ищу тур') {
        managerMessage = 'Да, конечно, вы можете просмотреть туры на странице "Горящие туры".';
      } else if (message.toLowerCase() === 'спасибо за помощь!') {
        managerMessage = 'Спасибо за обращение!';
      } else {
        managerMessage = 'дополнить логику чата!';
      }

      // Ответ менеджера через 1 секунду
      setTimeout(() => {
        const managerMessageDiv = document.createElement('div');
        managerMessageDiv.classList.add('manager-message'); // Класс для сообщений менеджера
        managerMessageDiv.textContent = managerMessage; // Ответ менеджера
        chatMessages.appendChild(managerMessageDiv);
      }, 1000); // Задержка в 1 секунду для имитации ответа менеджера
    }

    // Очищаем поле ввода
    chatInput.value = ''; // Не скрываем чат автоматически
  });

</script>


<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Инициализация слайдера для длительности
    const durationSlider = document.getElementById('duration-slider');
    noUiSlider.create(durationSlider, {
      start: [0, 60],
      connect: true,
      range: {
        min: 0,
        max: 60
      }
    });
    const durationMin = document.getElementById('durationMin');
    const durationMax = document.getElementById('durationMax');
    const durationMinValue = document.getElementById('durationMinValue');
    const durationMaxValue = document.getElementById('durationMaxValue');

    durationSlider.noUiSlider.on('update', function (values) {
      durationMin.value = values[0];
      durationMax.value = values[1];
      durationMinValue.textContent = Math.round(values[0]);
      durationMaxValue.textContent = Math.round(values[1]);
    });

    // Инициализация слайдера для цены
    const priceSlider = document.getElementById('price-slider');
    noUiSlider.create(priceSlider, {
      start: [0, 5000],
      connect: true,
      range: {
        min: 0,
        max: 5000
      },
      step: 1
    });
    const priceMin = document.getElementById('priceMin');
    const priceMax = document.getElementById('priceMax');
    const priceMinValue = document.getElementById('priceMinValue');
    const priceMaxValue = document.getElementById('priceMaxValue');

    priceSlider.noUiSlider.on('update', function (values) {
      priceMin.value = values[0];
      priceMax.value = values[1];
      priceMinValue.textContent = Math.round(values[0]);
      priceMaxValue.textContent = Math.round(values[1]);
    });
  });
</script>


<script>
  const swiper = new Swiper('.swiper-container', {
    slidesPerView: 4, // Количество карточек на экране
    spaceBetween: 30, // Расстояние между карточками
    loop: true, // Бесконечный цикл
    autoplay: {
      delay: 3000, // Задержка между прокрутками (в миллисекундах)
      disableOnInteraction: false, // Автопрокрутка не останавливается при взаимодействии
    },
    navigation: {
      nextEl: '.swiper-button-next', // Стрелка "вперед" (смотрит вправо)
      prevEl: '.swiper-button-prev', // Стрелка "назад" (смотрит влево)
    },
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
  });
</script>

</body>
</html>








